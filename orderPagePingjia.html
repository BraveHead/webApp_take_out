<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>商家评价界面</title>
    <link rel="stylesheet" href="CSS/lib/common.css"/>
    <link rel="stylesheet" href="CSS/orderPage.css" type="text/css"/>
    <style>
        body{
            background-color: #f1f1f1;
        }
    </style>
    <script src="JS/lib/autoSetRem.js"></script>
</head>
<body>

<div class="new">
    <header class="order_food_header">
        <div class="order_header_nav">
            <img src="Pictures/Pic/header_icon/back.png" class="order_back"/>
            <span class="businessItemName" style="color: #3c3c3c;">蜀香坊</span>
            <img src="Pictures/Pic/click_food/no_collection.png" class="order_collection"/>
            <img src="Pictures/Pic/header_icon/share.png" class="order_share"/>
        </div>
    </header>
    <div class="order_container">

        <div class="order_header_message_container">
            <div class="order_header_message">
                <div class="order_header_message_left">
                    <img src="Pictures/Pic/click_food/business_header_pic.png"/>
                </div>
                <div class="order_header_message_right">
                    <div class="order_message_name">满减特约-蜀香坊-City</div>
                    <div class="order_message_type">中餐，西餐，四川，日餐，韩餐，冰激凌</div>
                    <div class='order_message_safe'>
                        <img src="Pictures/Pic/click_food/manjian.png" class="safe_logo"/>
                        <span class="safe_message">满30减25， 满60减55， 满90减70</span>
                        <span class="safe_more">2个活动 <img src="Pictures/Pic/click_food/safe_down.png"/></span>
                    </div>
                    <div class="order_message_safe_hidden">
                        <img src="Pictures/Pic/click_food/manjian.png" class="safe_logo"/>
                        <p>新用户第一次下单立减20</p>
                    </div>
                </div>
                <div class="clear"></div>
            </div>
        </div>
        <!--滚动广播-->
        <div class="scroll_text">
            <div class="scroll_text_container">
                <img src="Pictures/Pic/click_food/advertisement.png"/>
                <marquee>下大雨了，帅的司机都没了，为了你们的幸福，不开店了！</marquee>
            </div>
        </div>
        <!--商家模块的切换-->
        <div class="food_list_container">
            <div class="business_module_container" id="contrast">
                <a href="orderPage.html" class="module_list"><span class="module_list_default">点菜</span></a>
                <a href="orderPagePingjia.html" class="module_list"><span class="module_list_default showBottomRed">评价</span></a>
                <a href="orderPageShangjia.html" class="module_list"><span class="module_list_default">商家</span></a>
            </div>
            <!--评价-->
            <div class="swiper-slide" style="overflow-y: scroll;">
                <div>
                    <div class="evaluate_background">
                        <div>
                            <div class="evaluate_sort"><b>4</b><span>.5</span></div>
                            <p class="evaluate_number">1174外卖用户评价</p>
                        </div>
                    </div>
                    <div class="choice_evaluate">
                        <div class="choice_evaluate_container">
                            <img src="Pictures/Pic/evaluate/no_choice.png"/>
                            <span>只显示有文字评论的内容</span>
                        </div>
                    </div>
                    <div class="evaluate_content">
                        <div>
                            <!--用户评价-->
                            <div class="evaluate_content_container">
                                <div class="eva-height">
                                    <div class="evaluate_context_left">
                                        <img src="Pictures/Pic/evaluate/header_pic.png"/>
                                    </div>
                                    <div class="evaluate_context_right">
                                        <div class="customer_id">
                                            <b>不是乌贝拉</b>
                                            <span>
                                        <img src="Pictures/Pic/evaluate/yellow_star.png"/><img src="Pictures/Pic/evaluate/yellow_star.png"/><img src="Pictures/Pic/evaluate/yellow_star.png"/><img src="Pictures/Pic/evaluate/gray_star.png"/><img src="Pictures/Pic/evaluate/gray_star.png"/>
                                    </span>
                                        </div>
                                        <div class="context_message">
                                    <span>
                                        不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉
                                        不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉,
                                        不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉,不是乌贝拉不是乌贝拉不是乌贝拉,不是乌贝拉
                                        不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉,不是乌贝拉不是乌贝拉不是乌贝拉,不是乌贝拉
                                        不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉,不是乌贝拉不是乌贝拉不是乌贝拉,不是乌贝拉
                                    </span>
                                            <time>2017-01-08 08:50</time>
                                        </div>
                                    </div>
                                    <div class="clear"></div>
                                </div>
                            </div>

                            <!--用户评价-->
                            <div class="evaluate_content_container">
                                <div>
                                    <div class="evaluate_context_left">
                                        <img src="Pictures/Pic/evaluate/header_pic.png"/>
                                    </div>
                                    <div class="evaluate_context_right">
                                        <div class="customer_id">
                                            <b>不是乌贝拉</b>
                                            <span>
                                        <img src="Pictures/Pic/evaluate/yellow_star.png"/><img src="Pictures/Pic/evaluate/yellow_star.png"/><img src="Pictures/Pic/evaluate/yellow_star.png"/><img src="Pictures/Pic/evaluate/gray_star.png"/><img src="Pictures/Pic/evaluate/gray_star.png"/>
                                    </span>
                                        </div>
                                        <div class="context_message">
                                    <span>
                                        不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉
                                        不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉,
                                        不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉,不是乌贝拉不是乌贝拉不是乌贝拉,不是乌贝拉
                                        不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉,不是乌贝拉不是乌贝拉不是乌贝拉,不是乌贝拉
                                        不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉,不是乌贝拉不是乌贝拉不是乌贝拉,不是乌贝拉
                                    </span>
                                            <time>2017-01-08 08:50</time>
                                        </div>
                                    </div>
                                    <div class="clear"></div>
                                </div>
                            </div>
                            <div class="evaluate_content evaluate_content_bus">
                                <!--商家回复-->
                                <div class="evaluate_content_container">
                                    <div>
                                        <div class="evaluate_context">
                                            <div class="evaluate_context_left business_evaluate_left">
                                                <img src="Pictures/Pic/evaluate/header_pic.png"/>
                                            </div>
                                            <div class="evaluate_context_right business_evaluate_right">
                                                <div class="customer_id">
                                                    <b>不是乌贝拉</b>
                                                    <time>2017-01-08 08:50</time>
                                                </div>
                                                <div class="context_message">
                                                <span>
                                                    不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉
                                                    不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉,
                                                    不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉,不是乌贝拉不是乌贝拉不是乌贝拉,不是乌贝拉
                                                    不是乌贝拉不是乌贝拉不是乌贝拉不是乌贝拉,不是乌贝拉不是乌贝拉不是乌贝拉,不是乌贝拉
                                                </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="clear"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</div>
<!--阴影背景-->
<div class="serverSettingContainer"></div>
<!--点击分享-->
<div class="ShareListContainer">
    <a href="#"><img src="Pictures/Pic/click_food/qqFirends.png"/><p>QQ好友</p></a>
    <a href="#"><img src="Pictures/Pic/click_food/qqFirendsHome.png"/><p>QQ空间</p></a>
    <a href="#"><img src="Pictures/Pic/click_food/weChatFriends.png"/><p>微信好友</p></a>
    <a href="#"><img src="Pictures/Pic/click_food/weChatFirendsHome.png"/><p>微信朋友圈</p></a>
    <a href="#"><img src="Pictures/Pic/click_food/singWibo.png"/><p>新浪微博</p></a>
    <a href="#"><img src="Pictures/Pic/click_food/copyLink.png"/><p>复制链接</p></a>
    <div>取消</div>
</div>
</div>
</body>
<script src="JS/lib/jquery-3.1.1.min.js"></script>
<script src="JS/lib/common.js"></script>
<script>
    (function () {
        /*动态给评论列表添加高度*/
        var showEvaHeight = $('.evaluate_content').outerHeight(true);
        var bgcHeight = $(".evaluate_background").outerHeight(true);
        var choiceHeight = $(".choice_evaluate").outerHeight(true);
        var eva = $('.evaluate_content_container');
        var evaHeight = 0;
        var busiHeight = 0;
        var busi = $(".evaluate_content_bus");

        var arrStat = ['Pictures/Pic/click_food/no_collection.png','Pictures/Pic/click_food/collection.png'];
        var arrStatCopy = ['Pictures/Pic/click_food/collection_dark.png',"Pictures/Pic/click_food/red_stat.png"];
        var shareArr = ['Pictures/Pic/header_icon/share.png',"Pictures/Pic/click_food/share_dark.png"];
        var backArr = ['Pictures/Pic/header_icon/back.png','Pictures/Pic/header_icon/back_gray.png'];
        var storage = window.sessionStorage;

        for(let i = 0; i < eva.length; i ++){
            evaHeight += eva.eq(i).outerHeight(true);
        }
        for(let i = 0 ;i< busi.length; i ++){
            busiHeight += busi.eq(i).outerHeight(true);
        }
        $(".swiper-slide").css("height",showEvaHeight);
        $('.swiper-slide>div').css("height",bgcHeight + evaHeight + busiHeight + choiceHeight+"px");
        $(".new").css("left",($(document).width() - $("body").width())/2 + "px")
        /*评论模块*/
        $(".choice_evaluate_container>img").on('click',function (e) {
            if($('.choice_evaluate_container>img').attr("src") == "Pictures/Pic/evaluate/choice.png"){
                $('.choice_evaluate_container>img').attr("src","Pictures/Pic/evaluate/no_choice.png");
            }else{
                $('.choice_evaluate_container>img').attr("src","Pictures/Pic/evaluate/choice.png");
            }
        });

        $(".evaluate_context_right img").on('click',function (e) {
            let nowIndex = $(".evaluate_context_right img").index(this);
            $(".evaluate_context_right img").attr('src',"Pictures/Pic/evaluate/gray_star.png");
            for(let i = 0; i < nowIndex; i ++){
                $(".evaluate_context_right img").eq(i).attr('src',"Pictures/Pic/evaluate/yellow_star.png");
            }
        });

        /* 监听页面容器的滚动，产生变化, 和common中的函数一起起效果*/
        function listenScrollBox() {
            var newOne = document.querySelectorAll(".new");
            var newScrollTop;
            newOne[0].addEventListener('scroll',function (e) {

                newScrollTop = newOne[0].scrollTop;
                if(newScrollTop >= 20){
                    $('.order_food_header').addClass('headerTransform');
                    $('.order_back').attr('src',backArr[1]);
                    if( $('.order_collection').attr('src') == arrStat[1]){
                        $('.order_collection').attr('src',arrStatCopy[1]);
                    }else{
                        $('.order_collection').attr('src',arrStatCopy[0]);
                    }
                    $('.order_header_message_container').addClass('headerTransform showTransformHidden');
                    $('.businessItemName').css({'display':'block','color':'#3c3c3c'});
                    $('.order_share').attr("src",shareArr[1]);
                }else{
                    $('.order_share').attr("src",shareArr[0]);
                    $('.order_food_header').removeClass("headerTransform");
                    if($('.order_collection').attr('src') == arrStatCopy[1]){
                        $('.order_collection').attr('src',arrStat[1]);
                    }else{
                        $('.order_collection').attr('src',arrStat[0]);
                    }
                    $('.order_back').attr('src',backArr[0]);
                    $('.order_header_message_container').removeClass('headerTransform showTransformHidden');
                    $('.businessItemName').css({'display':'none','color':'#3c3c3c'});
                }

            });
            $(".food_list_item_ul").on("scroll",scrollFun);
        }
        listenScrollBox();
    })()
</script>
</html>